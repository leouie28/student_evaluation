/*! For license information please see 724.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[724],{4980:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(1519),r=n.n(o)()((function(t){return t[1]}));r.push([t.id,".feat-img[data-v-b865390e]{border:2px dashed grey;width:100%}",""]);const i=r},1630:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(1519),r=n.n(o)()((function(t){return t[1]}));r.push([t.id,".feat-img[data-v-7a484f3c]{border:1px dashed grey;height:52px;width:100%}",""]);const i=r},4724:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var r=e&&e.prototype instanceof v?e:v,i=Object.create(r.prototype),a=new E(o||[]);return i._invoke=function(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return C()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=d(t,e,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var p={};function v(){}function f(){}function h(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(L([])));_&&_!==e&&n.call(_,a)&&(m=_);var g=h.prototype=v.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,a,c,l){var s=d(t[i],t,a);if("throw"!==s.type){var u=s.arg,p=u.value;return p&&"object"==o(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,c,l)}),(function(t){r("throw",t,c,l)})):e.resolve(p).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,l)}))}l(s.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=d(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=h,s(g,"constructor",h),s(h,"constructor",f),f.displayName=s(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new x(u(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,l,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,n,o,r,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(o,r)}const a={data:function(){return{readonly:!1,updating:!1,date_open_menu:!1,time_open_menu:!1,date_close_menu:!1,time_close_menu:!1,feat_img:null}},props:{election:{type:Object,default:function(){}}},created:function(){localStorage._show&&(console.log(localStorage._show),"1"==localStorage._show&&(this.readonly=!0,this.updating=!0))},methods:{onFileChange:function(t){var e,n=this;return(e=r().mark((function e(){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t[0],!(t.length>0)){e.next=11;break}if(o.type.match("image.*")){e.next=7;break}alert("Please choose an image file"),e.next=11;break;case 7:return URL.createObjectURL(o),e.next=10,n.createImageBase64(o);case 10:n.election.image=e.sent;case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function c(t){i(a,o,r,c,l,"next",t)}function l(t){i(a,o,r,c,l,"throw",t)}c(void 0)}))})()},generateCode:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,o=0;o<8;)t+=e.charAt(Math.floor(Math.random()*n)),o+=1;return t}}};var c=n(3379),l=n.n(c),s=n(4980),u={insert:"head",singleton:!1};l()(s.Z,u);s.Z.locals;var d=n(1900);const p=(0,d.Z)(a,(function(){var t=this,e=t._self._c;return e("div",[e("v-card",{staticClass:"mb-4",attrs:{outlined:""}},[e("v-card-text",[e("v-row",[t.updating?e("v-col",{attrs:{md:"12",cols:"12"}},[t.readonly?e("v-btn",{attrs:{small:"",color:"success",outlined:""},on:{click:function(e){t.readonly=!1}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-square-edit-outline")]),t._v("\n                        Edit\n                    ")],1):e("div",[e("v-btn",{attrs:{small:"",color:"success"},on:{click:function(e){t.readonly=!0}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check")]),t._v("\n                            Save\n                        ")],1),t._v(" "),e("v-btn",{staticClass:"ml-1",attrs:{small:"",color:"error"},on:{click:function(e){t.readonly=!0,t.$emit("cancelEdit")}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-close")]),t._v("\n                            Cancel\n                        ")],1)],1)],1):t._e(),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-row",{attrs:{wrap:""}},[e("v-col",{attrs:{md:"12",cols:"12"}},[e("v-text-field",{attrs:{filled:!t.readonly,readonly:t.readonly,label:"Name of the election",placeholder:"Ex. SSG Election","hide-details":"auto"},model:{value:t.election.name,callback:function(e){t.$set(t.election,"name",e)},expression:"election.name"}})],1),t._v(" "),e("v-col",{attrs:{md:"12",cols:"12"}},[e("v-textarea",{attrs:{filled:!t.readonly,readonly:t.readonly,label:"Description (optional)","hide-details":"auto"},model:{value:t.election.description,callback:function(e){t.$set(t.election,"description",e)},expression:"election.description"}})],1),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e("v-text-field",t._g(t._b({attrs:{filled:!t.readonly,"prepend-inner-icon":"mdi-calendar",label:"Opening Date",readonly:"","hide-details":"auto"},model:{value:t.election.date_open,callback:function(e){t.$set(t.election,"date_open",e)},expression:"election.date_open"}},"v-text-field",t.readonly?"":r,!1),t.readonly?"":o))]}}]),model:{value:t.date_open_menu,callback:function(e){t.date_open_menu=e},expression:"date_open_menu"}},[t._v(" "),e("v-date-picker",{attrs:{"no-title":"",min:t.moment().format("YYYY-MM-DD"),max:t.election.date_close},on:{input:function(e){t.date_open_menu=!1}},model:{value:t.election.date_open,callback:function(e){t.$set(t.election,"date_open",e)},expression:"election.date_open"}})],1)],1),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-menu",{ref:"open",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.election.time_open,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.election,"time_open",e)},"update:return-value":function(e){return t.$set(t.election,"time_open",e)}},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e("v-text-field",t._g(t._b({attrs:{filled:!t.readonly,"prepend-inner-icon":"mdi-clock-outline",label:"Opening Time",readonly:"","hide-details":"auto"},model:{value:t.election.time_open,callback:function(e){t.$set(t.election,"time_open",e)},expression:"election.time_open"}},"v-text-field",t.readonly?"":r,!1),t.readonly?"":o))]}}]),model:{value:t.time_open_menu,callback:function(e){t.time_open_menu=e},expression:"time_open_menu"}},[t._v(" "),t.time_open_menu?e("v-time-picker",{attrs:{"full-width":"","no-title":""},on:{"click:minute":function(e){return t.$refs.open.save(t.election.time_open)}},model:{value:t.election.time_open,callback:function(e){t.$set(t.election,"time_open",e)},expression:"election.time_open"}}):t._e()],1)],1),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e("v-text-field",t._g(t._b({attrs:{filled:!t.readonly,"prepend-inner-icon":"mdi-calendar",label:"CLosing Date",readonly:"","hide-details":"auto"},model:{value:t.election.date_close,callback:function(e){t.$set(t.election,"date_close",e)},expression:"election.date_close"}},"v-text-field",t.readonly?"":r,!1),t.readonly?"":o))]}}]),model:{value:t.date_close_menu,callback:function(e){t.date_close_menu=e},expression:"date_close_menu"}},[t._v(" "),e("v-date-picker",{attrs:{"no-title":"",min:t.election.date_open},on:{input:function(e){t.date_close_menu=!1}},model:{value:t.election.date_close,callback:function(e){t.$set(t.election,"date_close",e)},expression:"election.date_close"}})],1)],1),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-menu",{ref:"close",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.election.time_close,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.election,"time_close",e)},"update:return-value":function(e){return t.$set(t.election,"time_close",e)}},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e("v-text-field",t._g(t._b({attrs:{filled:!t.readonly,"prepend-inner-icon":"mdi-clock-outline",label:"Closing Time",readonly:"","hide-details":"auto"},model:{value:t.election.time_close,callback:function(e){t.$set(t.election,"time_close",e)},expression:"election.time_close"}},"v-text-field",t.readonly?"":r,!1),t.readonly?"":o))]}}]),model:{value:t.time_close_menu,callback:function(e){t.time_close_menu=e},expression:"time_close_menu"}},[t._v(" "),t.time_close_menu?e("v-time-picker",{attrs:{"full-width":"","no-title":""},on:{"click:minute":function(e){return t.$refs.close.save(t.election.time_close)}},model:{value:t.election.time_close,callback:function(e){t.$set(t.election,"time_close",e)},expression:"election.time_close"}}):t._e()],1)],1)],1)],1),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-row",{attrs:{wrap:""}},[e("v-col",{attrs:{md:"12",cols:"12"}},[e("div",{staticClass:"feat-img mx-auto pa-2",on:{click:function(e){!t.readonly&&t.$refs.file_input.click()}}},[e("input",{ref:"file_input",staticClass:"hide",attrs:{type:"file",accept:".jpeg,.png,.jpg"},on:{change:function(e){return t.onFileChange(e.target.files)}}}),t._v(" "),t.election.image?t._e():e("div",{staticClass:"d-flex justify-center align-center flex-column",staticStyle:{height:"100%"}},[e("v-icon",{attrs:{size:"60"}},[t._v("mdi-file-image")]),t._v(" "),e("v-toolbar-title",[t._v("\n                                        Feature image or cover photo (landscape)\n                                    ")]),t._v(" "),e("v-btn",{attrs:{elevation:"0"},on:{click:function(e){e.stopPropagation(),!t.readonly&&t.$refs.file_input.click()}}},[t._v("\n                                        Browse file\n                                    ")])],1),t._v(" "),t.election.image?e("v-img",{attrs:{alt:"Feature image",position:"center center","max-height":"100%","max-width":"100%",src:t.election.image}},[t.election.image&&!t.readonly?e("v-btn",{staticClass:"ma-n3",attrs:{small:"",absolute:"",top:"",right:"",color:"primary"}},[t._v("\n                                        Change\n                                    "),e("v-icon",{staticClass:"ml-2"},[t._v("mdi-pencil")])],1):t._e()],1):t._e()],1)]),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-text-field",{attrs:{filled:!t.readonly,placeholder:"Ex. 2022-2023",label:"School year",readonly:t.readonly,"hide-details":"auto"},model:{value:t.election.school_year,callback:function(e){t.$set(t.election,"school_year",e)},expression:"election.school_year"}})],1),t._v(" "),e("v-col",{attrs:{md:"6",cols:"12"}},[e("v-text-field",{attrs:{filled:!t.readonly,placeholder:"Ex. SSG-ELECTION-2022",label:"Election Code (no spacing)",readonly:t.readonly,"append-icon":t.readonly?"":"mdi-reload","hide-details":"auto"},on:{"click:append":function(e){t.election.code=t.generateCode()}},model:{value:t.election.code,callback:function(e){t.$set(t.election,"code",e)},expression:"election.code"}})],1),t._v(" "),t.updating?t._e():e("v-col",{attrs:{md:"12",cols:"12"}},[e("v-alert",{attrs:{outlined:"",type:"warning",color:"brown",prominent:"",border:"left"}},[t._v("\n                                Note* Election cannot be edited once it open to the voters.\n                            ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"b865390e",null).exports;const v={data:function(){return{readonly:!1,updating:!1}},props:{positions:{type:Array,default:function(){return[]}}},created:function(){localStorage._show&&"1"==localStorage._show&&(this.readonly=!0,this.updating=!0)},methods:{addSlot:function(){var t=this.positions.length;this.positions.push({name:"",max_vote:1,candidate:[{name:"",partylist:"",image:""}],sort:t+1})}}};const f=(0,d.Z)(v,(function(){var t=this,e=t._self._c;return e("div",[e("v-card",{staticClass:"mb-4",attrs:{outlined:""}},[e("v-card-text",[t.updating?e("div",{staticClass:"mb-4"},[t.readonly?e("v-btn",{attrs:{small:"",color:"success",outlined:""},on:{click:function(e){t.readonly=!1}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-square-edit-outline")]),t._v("\n                    Edit\n                ")],1):e("div",[e("v-btn",{attrs:{small:"",color:"success"},on:{click:function(e){t.readonly=!0}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check")]),t._v("\n                        Save\n                    ")],1),t._v(" "),e("v-btn",{staticClass:"ml-1",attrs:{small:"",color:"error"},on:{click:function(e){t.readonly=!0,t.$emit("cancelEdit")}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-close")]),t._v("\n                        Cancel\n                    ")],1)],1)],1):t._e(),t._v(" "),t._l(t.positions,(function(n,o){return[e("v-row",{key:o},[e("v-col",{attrs:{md:"9",cols:"12"}},[e("v-text-field",{attrs:{filled:!t.readonly,readonly:t.readonly,dense:!t.readonly,label:"Position name",placeholder:"Ex. President","hide-details":"auto"},model:{value:t.positions[o].name,callback:function(e){t.$set(t.positions[o],"name",e)},expression:"positions[index].name"}})],1),t._v(" "),e("v-col",{attrs:{md:"3",cols:"12"}},[e("v-text-field",{attrs:{filled:!t.readonly,readonly:t.readonly,min:"1",dense:!t.readonly,type:"number",label:"Maximum votes","hide-details":"auto"},model:{value:t.positions[o].max_vote,callback:function(e){t.$set(t.positions[o],"max_vote",e)},expression:"positions[index].max_vote"}})],1)],1)]})),t._v(" "),t.readonly?t._e():e("v-row",{staticClass:"mb-1"},[e("div",{staticClass:"text-center"},[e("v-btn",{attrs:{outlined:""},on:{click:t.addSlot}},[t._v("\n                        Add Position\n                        "),e("v-icon",{staticClass:"ml-2"},[t._v("mdi-plus")])],1)],1)])],2)],1)],1)}),[],!1,null,"4f40fe7b",null).exports;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function m(){m=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var r=e&&e.prototype instanceof d?e:d,i=Object.create(r.prototype),a=new E(o||[]);return i._invoke=function(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return C()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=s(t,e,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function d(){}function p(){}function v(){}var f={};c(f,r,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(L([])));_&&_!==e&&n.call(_,r)&&(f=_);var g=v.prototype=d.prototype=Object.create(f);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(r,i,a,c){var l=s(t[r],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==h(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(l.arg)}var r;this._invoke=function(t,n){function i(){return new e((function(e,r){o(t,n,e,r)}))}return r=r?r.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,u;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,c(g,"constructor",v),c(v,"constructor",p),p.displayName=c(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),c(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new x(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),c(g,a,"Generator"),c(g,r,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function y(t,e,n,o,r,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(o,r)}const _={data:function(){return{partylist:[],readonly:!1,updating:!1}},props:{positions:{type:Array,default:function(){return[]}}},created:function(){this.getPartylist(),localStorage._show&&"1"==localStorage._show&&(this.readonly=!0,this.updating=!0)},methods:{addSlot:function(t){this.positions[t].candidate.push({name:"",partylist:"",image:""})},getPartylist:function(){var t=this;axios.get("/admin-api/partylist").then((function(e){var n=e.data;t.partylist=n.data}))},triggerInput:function(t,e){console.log(t,e);var n="file_input_".concat(t).concat(e);this.$refs[n][0].click()},onFileChange:function(t,e,n){var o,r=this;return(o=m().mark((function o(){var i;return m().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log(t),i=t[0],!(t.length>0)){o.next=12;break}if(i.type.match("image.*")){o.next=8;break}alert("Please choose an image file"),o.next=12;break;case 8:return URL.createObjectURL(i),o.next=11,r.createImageBase64(i);case 11:r.positions[e].candidate[n].image=o.sent;case 12:case"end":return o.stop()}}),o)})),function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){y(i,n,r,a,c,"next",t)}function c(t){y(i,n,r,a,c,"throw",t)}a(void 0)}))})()}}};var g=n(1630),w={insert:"head",singleton:!1};l()(g.Z,w);g.Z.locals;const x={components:{Step1:p,Step2:f,Step3:(0,d.Z)(_,(function(){var t=this,e=t._self._c;return e("div",[t.updating?e("div",{staticClass:"mb-4"},[t.readonly?e("v-btn",{attrs:{small:"",color:"success",outlined:""},on:{click:function(e){t.readonly=!1}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-square-edit-outline")]),t._v("\n                    Edit\n                ")],1):e("div",[e("v-btn",{attrs:{small:"",color:"success"},on:{click:function(e){t.readonly=!0}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check")]),t._v("\n                        Save\n                    ")],1),t._v(" "),e("v-btn",{staticClass:"ml-1",attrs:{small:"",color:"error"},on:{click:function(e){t.readonly=!0,t.$emit("cancelEdit")}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-close")]),t._v("\n                        Cancel\n                    ")],1)],1)],1):t._e(),t._v(" "),t._l(t.positions,(function(n,o){return[e("v-card",{key:o,staticClass:"mb-4",attrs:{outlined:""}},[e("v-card-title",[t._v('["'+t._s(n.name)+'"]')]),t._v(" "),e("v-card-text",[t._l(n.candidate,(function(n,r){return[e("v-row",{key:r},[e("v-col",{staticClass:"px-2",attrs:{md:"1",cols:"12"}},[e("v-row",{attrs:{wrap:""}},[e("v-col",{attrs:{md:"12",cols:"12"}},[e("div",{staticClass:"feat-img mx-auto"},[e("input",{ref:"file_input_".concat(o).concat(r),refInFor:!0,staticClass:"hide",attrs:{type:"file",accept:".jpeg,.png,.jpg"},on:{change:function(e){return t.onFileChange(e.target.files,o,r)}}}),t._v(" "),e("div",{staticStyle:{height:"100%"},on:{click:function(e){!t.readonly&&t.triggerInput(o,r)}}},[t.positions[o].candidate[r].image?t._e():e("div",{staticClass:"d-flex justify-center align-center flex-column",staticStyle:{height:"100%"}},[e("v-icon",[t._v("mdi-file-image")]),t._v("\n                                                icon/img\n                                            ")],1),t._v(" "),e("v-img",{attrs:{alt:"icon",position:"center center","max-height":"100%","max-width":"100%",src:t.positions[o].candidate[r].image}})],1)])])],1)],1),t._v(" "),e("v-col",{attrs:{md:"11",cols:"12"}},[e("v-row",[e("v-col",{attrs:{md:"7",cols:"12"}},[e("v-text-field",{attrs:{filled:!t.readonly,readonly:t.readonly,dense:!t.readonly,label:"Candidate Name",placeholder:"Ex. President","hide-details":"auto"},model:{value:t.positions[o].candidate[r].name,callback:function(e){t.$set(t.positions[o].candidate[r],"name",e)},expression:"positions[index].candidate[i].name"}})],1),t._v(" "),e("v-col",{attrs:{md:"5",cols:"12"}},[e("v-select",{attrs:{filled:!t.readonly,readonly:t.readonly,dense:!t.readonly,"hide-details":"auto","prepend-inner-icon":t.readonly?"":"mdi-plus",items:t.partylist,"item-text":"name","item-value":"id",label:"Party Group (optional)"},on:{"click:prepend-inner":function(e){return t.$router.push({name:"admin-partylist"})}},scopedSlots:t._u([{key:"item",fn:function(n){var o=n.item;return[e("v-avatar",{staticStyle:{border:"1px solid #ccc"},attrs:{size:"35"}},[e("img",{attrs:{src:o.images.length>0?t.imageSrc(o.images[0]):"/images/system/noimage.png"}})]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v(t._s(o.name))])]}}],null,!0),model:{value:t.positions[o].candidate[r].partylist,callback:function(e){t.$set(t.positions[o].candidate[r],"partylist",e)},expression:"positions[index].candidate[i].partylist"}})],1)],1)],1)],1)]})),t._v(" "),t.readonly?t._e():e("v-row",{staticClass:"mb-1"},[e("div",{staticClass:"text-center"},[e("v-btn",{attrs:{outlined:""},on:{click:function(e){return t.addSlot(o)}}},[t._v("\n                            Add "+t._s(n.name)+" candidate\n                            "),e("v-icon",{staticClass:"ml-2"},[t._v("mdi-plus")])],1)],1)])],2)],1)]}))],2)}),[],!1,null,"7a484f3c",null).exports},data:function(){return{isShow:!1,step:1,url:"",payload:{election:{name:"",school_year:"",description:"",date_open:"",time_open:"",date_close:"",time_close:"",code:"",image:null},positions:[{name:"",max_vote:1,candidate:[{name:"",partylist:"",image:null}],sort:1}]}}},mounted:function(){localStorage.getItem("payload")&&(this.payload=JSON.parse(localStorage.payload),this.url=window.location.origin+"/election/"+this.payload.election.urlkey,console.log(JSON.parse(localStorage.payload),"test")),localStorage._show&&(this.isShow=!0)},methods:{cancelEdit:function(){var t=this;axios.get("/admin-api/election/get-set/".concat(this.payload.election.id)).then((function(e){var n=e.data;t.payload=n}))},warning:function(){this._warning("Are you sure you want to add this data?")},saveLocal:function(t){this.step=t,localStorage.setItem("payload",JSON.stringify(this.payload))},create:function(){var t=this;this.warning_data.trigger=!1,localStorage.setItem("payload",JSON.stringify(this.payload)),axios.post("/admin-api/election/store-set",this.payload).then((function(e){var n=e.data;t._newAlert(!0,n.type,n.message)})).finally((function(){setTimeout((function(){localStorage.removeItem("payload"),t.$router.push({path:"/admin/election"})}),2e3)}))},copyLink:function(){console.log(this.url);var t=this.url;navigator.clipboard.writeText(t),alert("Link copied to clipboard")}}};const b=(0,d.Z)(x,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pa-2"},[e("v-card",{staticClass:"pa-2",attrs:{elevation:"2"}},[e("v-card-title",[t._v("\n            Election Form\n            "),e("v-spacer"),t._v(" "),t.isShow?e("span",{staticClass:"d-flex align-center"},[e("span",{staticClass:"text-subtitle-1 mr-1"},[t._v("Election Url: ")]),t._v(" "),e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e("v-chip",t._g(t._b({attrs:{label:"",outlined:"",color:"success"},on:{click:t.copyLink}},"v-chip",r,!1),o),[t._v("\n                            "+t._s(t.url)+"\n                            "),e("v-icon",{staticClass:"ml-2",attrs:{small:""}},[t._v("mdi-content-copy")])],1)]}}])},[t._v(" "),e("span",[t._v("Click to copy election url link")])])],1):e("v-btn",{attrs:{color:"secondary"}},[e("v-icon",{staticClass:"mr-2"},[t._v("mdi-backspace")]),t._v("\n                Return\n            ")],1)],1),t._v(" "),e("v-card-text",[e("v-stepper",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[e("v-stepper-header",[e("v-stepper-step",{attrs:{complete:t.step>1||t.isShow,editable:t.isShow,step:"1"}},[t._v("\n                    Election Info\n                ")]),t._v(" "),e("v-divider"),t._v(" "),e("v-stepper-step",{attrs:{complete:t.step>2||t.isShow,editable:t.isShow,step:"2"}},[t._v("\n                    Election Positions\n                ")]),t._v(" "),e("v-divider"),t._v(" "),e("v-stepper-step",{attrs:{complete:t.step>3||t.isShow,editable:t.isShow,step:"3"}},[t._v("\n                    Election Candidates\n                ")])],1),t._v(" "),e("v-stepper-items",[e("v-stepper-content",{attrs:{step:"1"}},[e("step-1",{attrs:{election:t.payload.election},on:{cancelEdit:t.cancelEdit}}),t._v(" "),t.isShow?t._e():e("div",[e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.saveLocal(2)}}},[t._v("\n                        "+t._s(t.isShow?"Next":"Continue")+"\n                        ")]),t._v(" "),e("v-btn",{attrs:{text:"",disabled:""}},[t._v("\n                        Back\n                        ")])],1)],1),t._v(" "),e("v-stepper-content",{attrs:{step:"2"}},[e("step-2",{attrs:{positions:t.payload.positions},on:{cancelEdit:t.cancelEdit}}),t._v(" "),t.isShow?t._e():e("div",[e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.saveLocal(3)}}},[t._v("\n                        "+t._s(t.isShow?"Next":"Continue")+"\n                        ")]),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:function(e){t.step=1}}},[t._v("\n                        Back\n                        ")])],1)],1),t._v(" "),e("v-stepper-content",{attrs:{step:"3"}},[e("step-3",{attrs:{positions:t.payload.positions},on:{cancelEdit:t.cancelEdit}}),t._v(" "),t.isShow?t._e():e("div",[e("v-btn",{attrs:{color:"primary",disabled:t.isShow},on:{click:t.warning}},[t._v("\n                        "+t._s(t.isShow?"Next":"Create Election")+"\n                        ")]),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:function(e){t.step=2}}},[t._v("\n                        Back\n                        ")])],1)],1)],1)],1)],1)],1),t._v(" "),e("Warning",{attrs:{data:t.warning_data},on:{close:function(e){t.warning_data.trigger=!1},confirm:t.create}})],1)}),[],!1,null,null,null).exports}}]);