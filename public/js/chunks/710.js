"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[710],{1710:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});i(381);const s={data:function(){var t=new Date;new Date(t.getFullYear()+1,0,1);return{confirmation:!1,valid:!0,errMsg:"",submitting:!1,elect:{},time:null}},mounted:function(){this.getElection()},methods:{getElection:function(){var t=this;if(localStorage._passcode){var e=this.$route.params.key;axios.get("/student-api/election-api/".concat(e,"/election-set")).then((function(e){var i=e.data;"error"!=i?(i.positions.forEach((function(e){e.max_vote>1?e.vote=[]:e.vote="";var s=new Date(i.closing),a=new Date;t.time=s-a})),t.elect=i,i.code!=localStorage._passcode&&(t.valid=!1)):(t.valid=!1,t.errMsg="Election key not found...")}))}else this.valid=!1,this.errMsg="Your passcode is not valid for this election."},resetPayload:function(){this.elect.positions.forEach((function(t){t.max_vote>1?t.vote=[]:t.vote=""}))},submit:function(){this.confirmation=!1,this.submitting=!0,axios.post("/student-api/vote-api",this.elect).then((function(t){t.data}))}}};const a=(0,i(1900).Z)(s,(function(){var t=this,e=t._self._c;return t.valid?e("div",[e("v-card",{class:"/images/system/noimage.png"==t.elect.image?"mb-2 cus-border-top":"mb-2"},[e("v-img",{attrs:{height:"150",src:t.elect.image}}),t._v(" "),e("v-card-title",[t._v(t._s(t.elect.name))]),t._v(" "),e("v-divider",{staticClass:"my-0"}),t._v(" "),e("v-card-text",[t._v("\n            "+t._s(t.elect.description)+"\n            "),e("div",{staticClass:"d-flex justify-end"},[t.time>0?e("countdown",{attrs:{time:t.time,interval:1e3},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticClass:"text--primary"},[t._v("Close inï¼š"+t._s(i.days)+"d : "+t._s(i.hours)+"h : "+t._s(i.minutes)+"m : "+t._s(i.seconds)+"s")])]}}],null,!1,154161753)}):e("span",{staticClass:"error--text"},[t._v("Election Closed")])],1)])],1),t._v(" "),t._l(t.elect.positions,(function(i,s){return[e("v-card",{key:i.id,staticClass:"mb-2"},[e("v-card-text",[e("v-toolbar-title",[t._v(t._s(i.name)+" "),i.max_vote>1?e("span",{staticClass:"text-subtitle-2 grey--text"},[t._v("( Vote "+t._s(i.max_vote)+" )")]):t._e()]),t._v(" "),i.max_vote<=1?e("v-radio-group",{model:{value:t.elect.positions[s].vote,callback:function(e){t.$set(t.elect.positions[s],"vote",e)},expression:"elect.positions[i].vote"}},t._l(i.candidate,(function(t){return e("v-radio",{key:t.id,attrs:{label:t.name,value:t.id}})})),1):e("div",{staticClass:"my-3"},t._l(i.candidate,(function(i){return e("v-checkbox",{key:i.id,staticClass:"mt-2",attrs:{label:i.name,value:i.id,"hide-details":""},model:{value:t.elect.positions[s].vote,callback:function(e){t.$set(t.elect.positions[s],"vote",e)},expression:"elect.positions[i].vote"}})})),1)],1)],1)]})),t._v(" "),e("v-card",{staticClass:"mb-3"},[e("v-card-text",{staticClass:"text-center error--text"},[t._v("\n            Invalid\n        ")])],1),t._v(" "),e("div",{staticClass:"text-right"},[e("v-btn",{attrs:{color:"secondary",disabled:t.submitting,outlined:""},on:{click:t.resetPayload}},[t._v("Reset Form")]),t._v(" "),e("v-btn",{attrs:{color:"primary",disabled:t.submitting},on:{click:function(e){t.confirmation=!0}}},[t._v("Submit my vote")])],1),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}},[e("v-card",[e("v-card-title",[t._v("\n                Warning\n            ")]),t._v(" "),e("v-card-text",{staticClass:"text-center"},[t._v("\n                Are you sure you want to submit your vote?\n            ")]),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:function(e){t.confirmation=!1}}},[t._v("\n                    Cancel\n                ")]),t._v(" "),e("v-btn",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("\n                    Confirm & submit\n                ")])],1)],1)],1)],2):e("div",{staticClass:"empty-container text-center"},[e("v-img",{staticClass:"mx-auto",attrs:{"max-width":"60%",alt:"Empty",src:"/images/system/empty.svg"}}),e("br"),t._v(" "),e("div",{staticClass:"text-h2 font-weight-medium w-100"},[t._v("\n        Oops\n    ")]),t._v(" "),e("div",{staticClass:"mt-2"},[t._v("\n        "+t._s(t.errMsg)+"\n    ")])],1)}),[],!1,null,null,null).exports}}]);